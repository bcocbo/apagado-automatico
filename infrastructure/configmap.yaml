apiVersion: v1
kind: ConfigMap
metadata:
  name: namespace-scheduler-config
  namespace: encendido-eks
  labels:
    app: namespace-scaler
    component: configuration
data:
  # Configuración de la tabla DynamoDB
  dynamodb_table_name: "NamespaceSchedules"
  dynamodb_gsi_name: "estado-fecha_encendido-index"
  
  # Configuración S3 (se actualizará después de crear el bucket)
  s3_bucket_name: "namespace-scheduler-config-prod-ACCOUNT_ID"
  s3_config_key: "config.json"
  
  # Configuración del sistema
  environment: "prod"
  service_version: "1.0.0"
  
  # Configuración de horarios por defecto
  default_startup_time: "08:00"
  default_shutdown_time: "17:00"
  max_namespaces_limit: "5"
  
  # Configuración de zona horaria
  timezone: "America/Bogota"
  
  # Configuración de validación
  min_startup_hour: "08"
  max_shutdown_hour: "03"
  
  # Configuración de centros de costo (ejemplo)
  cost_centers_example: |
    {
      "production-app": ["CC001", "CC002", "CC003"],
      "staging-app": ["CC001", "CC002"],
      "development-app": ["CC001"],
      "testing-app": ["CC001", "CC002"],
      "demo-app": ["CC003"]
    }

---
# Secret template para notificaciones (opcional)
apiVersion: v1
kind: Secret
metadata:
  name: notification-secrets
  namespace: encendido-eks
  labels:
    app: namespace-scaler
    component: secrets
type: Opaque
stringData:
  # Configurar estos valores según sea necesario
  # slack_webhook_url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
  # smtp_server: "smtp.gmail.com"
  # smtp_user: "your-email@domain.com"
  # smtp_password: "your-app-password"
  # notification_email: "admin@domain.com"
  
  # Placeholder para evitar errores si no se configuran
  placeholder: "configure-notification-secrets-if-needed"