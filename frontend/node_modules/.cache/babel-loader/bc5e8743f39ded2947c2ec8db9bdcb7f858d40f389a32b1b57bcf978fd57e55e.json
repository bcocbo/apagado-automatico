{"ast":null,"code":"import React,{useState}from'react';import{Box,Card,CardContent,Typography,Grid,Chip,IconButton,Avatar,LinearProgress,Collapse,Alert}from'@mui/material';import{PlayArrow as PlayIcon,Pause as PauseIcon,ExpandMore as ExpandMoreIcon,ExpandLess as ExpandLessIcon,AccessTime as TimeIcon,Savings as SavingsIcon,Error as ErrorIcon}from'@mui/icons-material';import{format,isAfter,parseISO}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NamespaceStatusGrid=_ref=>{let{schedules=[]}=_ref;const[expandedCards,setExpandedCards]=useState(new Set());const toggleExpanded=scheduleId=>{const newExpanded=new Set(expandedCards);if(newExpanded.has(scheduleId)){newExpanded.delete(scheduleId);}else{newExpanded.add(scheduleId);}setExpandedCards(newExpanded);};const getScheduleStatus=schedule=>{if(!schedule.enabled){return{status:'disabled',color:'default',icon:/*#__PURE__*/_jsx(PauseIcon,{})};}const now=new Date();const currentTime=format(now,'HH:mm');// Check if we're in shutdown period\nif(schedule.shutdown_time&&schedule.startup_time){const shutdownTime=schedule.shutdown_time;const startupTime=schedule.startup_time;// Handle overnight schedules (shutdown after startup)\nif(shutdownTime>startupTime){if(currentTime>=shutdownTime||currentTime<startupTime){return{status:'shutdown',color:'error',icon:/*#__PURE__*/_jsx(PauseIcon,{})};}}else{// Same day schedule\nif(currentTime>=shutdownTime&&currentTime<startupTime){return{status:'shutdown',color:'error',icon:/*#__PURE__*/_jsx(PauseIcon,{})};}}}// Check if there are any recent errors\nif(schedule.metadata.last_error){const lastError=parseISO(schedule.metadata.last_error);const oneHourAgo=new Date(now.getTime()-60*60*1000);if(isAfter(lastError,oneHourAgo)){return{status:'error',color:'error',icon:/*#__PURE__*/_jsx(ErrorIcon,{})};}}return{status:'active',color:'success',icon:/*#__PURE__*/_jsx(PlayIcon,{})};};const getNextAction=schedule=>{if(!schedule.enabled)return'Disabled';const now=new Date();const currentTime=format(now,'HH:mm');if(schedule.shutdown_time&&schedule.startup_time){const shutdownTime=schedule.shutdown_time;const startupTime=schedule.startup_time;// Handle overnight schedules\nif(shutdownTime>startupTime){if(currentTime>=shutdownTime||currentTime<startupTime){return\"Startup at \".concat(startupTime);}else{return\"Shutdown at \".concat(shutdownTime);}}else{// Same day schedule\nif(currentTime>=shutdownTime&&currentTime<startupTime){return\"Startup at \".concat(startupTime);}else if(currentTime<shutdownTime){return\"Shutdown at \".concat(shutdownTime);}else{return\"Shutdown at \".concat(shutdownTime,\" (tomorrow)\");}}}return'No schedule';};const calculateDailySavings=schedule=>{if(!schedule.shutdown_time||!schedule.startup_time)return 0;const target=schedule.metadata.cost_savings_target||0;return Math.round(target/30);// Approximate daily savings from monthly target\n};if(schedules.length===0){return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Namespace Status\"}),/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"No namespace schedules configured yet. Create your first schedule to get started.\"})]})});}return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Namespace Status\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[schedules.filter(s=>s.enabled).length,\" of \",schedules.length,\" active\"]})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:schedules.map(schedule=>{var _schedule$resource_ta,_schedule$resource_ta2,_schedule$resource_ta3,_schedule$resource_ta4;const{status,color,icon}=getScheduleStatus(schedule);const isExpanded=expandedCards.has(schedule.id);const dailySavings=calculateDailySavings(schedule);return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,lg:4,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",sx:{height:'100%',transition:'all 0.2s','&:hover':{boxShadow:2}},children:/*#__PURE__*/_jsxs(CardContent,{sx:{pb:1},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",mb:1,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:32,height:32,bgcolor:\"\".concat(color,\".light\")},children:icon}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",noWrap:true,children:schedule.namespace}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:schedule.cluster||'default'})]})]}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>toggleExpanded(schedule.id),children:isExpanded?/*#__PURE__*/_jsx(ExpandLessIcon,{}):/*#__PURE__*/_jsx(ExpandMoreIcon,{})})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",mb:2,children:[/*#__PURE__*/_jsx(Chip,{label:status.toUpperCase(),color:color,size:\"small\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:getNextAction(schedule)})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",mb:1,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:0.5,children:[/*#__PURE__*/_jsx(TimeIcon,{fontSize:\"small\",color:\"action\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",children:[schedule.shutdown_time||'--:--',\" - \",schedule.startup_time||'--:--']})]}),dailySavings>0&&/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:0.5,children:[/*#__PURE__*/_jsx(SavingsIcon,{fontSize:\"small\",color:\"success\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"success.main\",children:[\"$\",dailySavings,\"/day\"]})]})]}),/*#__PURE__*/_jsx(Box,{display:\"flex\",gap:0.5,mb:2,children:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'].map((day,index)=>{var _schedule$days_of_wee;const isActive=(_schedule$days_of_wee=schedule.days_of_week)===null||_schedule$days_of_wee===void 0?void 0:_schedule$days_of_wee.includes(index+1);return/*#__PURE__*/_jsx(Chip,{label:day,size:\"small\",variant:isActive?\"filled\":\"outlined\",color:isActive?\"primary\":\"default\",sx:{minWidth:'auto',height:20,fontSize:'0.7rem','& .MuiChip-label':{px:0.5}}},day);})}),/*#__PURE__*/_jsx(Collapse,{in:isExpanded,children:/*#__PURE__*/_jsxs(Box,{pt:1,borderTop:1,borderColor:\"divider\",children:[schedule.metadata.last_operation&&/*#__PURE__*/_jsxs(Box,{mb:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:\"Last Operation:\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[schedule.metadata.last_operation,\" at\",' ',schedule.metadata.last_operation_time?format(parseISO(schedule.metadata.last_operation_time),'MMM dd, HH:mm'):'Unknown']})]}),schedule.metadata.last_error&&/*#__PURE__*/_jsxs(Box,{mb:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"error\",children:\"Last Error:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"error\",children:schedule.metadata.last_error_message||'Unknown error'})]}),(((_schedule$resource_ta=schedule.resource_targets)===null||_schedule$resource_ta===void 0?void 0:_schedule$resource_ta.deployments)||((_schedule$resource_ta2=schedule.resource_targets)===null||_schedule$resource_ta2===void 0?void 0:_schedule$resource_ta2.statefulsets))&&/*#__PURE__*/_jsxs(Box,{mb:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:\"Targets:\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:1,flexWrap:\"wrap\",children:[(_schedule$resource_ta3=schedule.resource_targets.deployments)===null||_schedule$resource_ta3===void 0?void 0:_schedule$resource_ta3.map((dep,idx)=>/*#__PURE__*/_jsx(Chip,{label:\"Deploy: \".concat(dep),size:\"small\",variant:\"outlined\"},\"dep-\".concat(idx))),(_schedule$resource_ta4=schedule.resource_targets.statefulsets)===null||_schedule$resource_ta4===void 0?void 0:_schedule$resource_ta4.map((sts,idx)=>/*#__PURE__*/_jsx(Chip,{label:\"STS: \".concat(sts),size:\"small\",variant:\"outlined\"},\"sts-\".concat(idx)))]})]}),schedule.metadata.success_rate!==undefined&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:\"Success Rate\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",children:[schedule.metadata.success_rate,\"%\"]})]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:schedule.metadata.success_rate,color:schedule.metadata.success_rate>90?'success':'warning',sx:{height:4,borderRadius:2}})]})]})})]})})},schedule.id);})})]})});};export default NamespaceStatusGrid;","map":{"version":3,"names":["React","useState","Box","Card","CardContent","Typography","Grid","Chip","IconButton","Avatar","LinearProgress","Collapse","Alert","PlayArrow","PlayIcon","Pause","PauseIcon","ExpandMore","ExpandMoreIcon","ExpandLess","ExpandLessIcon","AccessTime","TimeIcon","Savings","SavingsIcon","Error","ErrorIcon","format","isAfter","parseISO","jsx","_jsx","jsxs","_jsxs","NamespaceStatusGrid","_ref","schedules","expandedCards","setExpandedCards","Set","toggleExpanded","scheduleId","newExpanded","has","delete","add","getScheduleStatus","schedule","enabled","status","color","icon","now","Date","currentTime","shutdown_time","startup_time","shutdownTime","startupTime","metadata","last_error","lastError","oneHourAgo","getTime","getNextAction","concat","calculateDailySavings","target","cost_savings_target","Math","round","length","children","variant","gutterBottom","severity","display","justifyContent","alignItems","mb","filter","s","container","spacing","map","_schedule$resource_ta","_schedule$resource_ta2","_schedule$resource_ta3","_schedule$resource_ta4","isExpanded","id","dailySavings","item","xs","sm","lg","sx","height","transition","boxShadow","pb","gap","width","bgcolor","noWrap","namespace","cluster","size","onClick","label","toUpperCase","fontSize","day","index","_schedule$days_of_wee","isActive","days_of_week","includes","minWidth","px","in","pt","borderTop","borderColor","last_operation","last_operation_time","last_error_message","resource_targets","deployments","statefulsets","flexWrap","dep","idx","sts","success_rate","undefined","value","borderRadius"],"sources":["/home/diediazping/Documents/apagado-automatico/frontend/src/pages/Dashboard/components/NamespaceStatusGrid.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Chip,\n  IconButton,\n  Tooltip,\n  Avatar,\n  LinearProgress,\n  Collapse,\n  Alert,\n} from '@mui/material';\nimport {\n  Schedule as ScheduleIcon,\n  PlayArrow as PlayIcon,\n  Pause as PauseIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n  AccessTime as TimeIcon,\n  Savings as SavingsIcon,\n  Warning as WarningIcon,\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n} from '@mui/icons-material';\nimport { format, isAfter, isBefore, parseISO } from 'date-fns';\nimport { NamespaceSchedule } from '../../../types';\n\ninterface NamespaceStatusGridProps {\n  schedules?: NamespaceSchedule[];\n}\n\nconst NamespaceStatusGrid: React.FC<NamespaceStatusGridProps> = ({ schedules = [] }) => {\n  const [expandedCards, setExpandedCards] = useState<Set<string>>(new Set());\n\n  const toggleExpanded = (scheduleId: string) => {\n    const newExpanded = new Set(expandedCards);\n    if (newExpanded.has(scheduleId)) {\n      newExpanded.delete(scheduleId);\n    } else {\n      newExpanded.add(scheduleId);\n    }\n    setExpandedCards(newExpanded);\n  };\n\n  const getScheduleStatus = (schedule: NamespaceSchedule) => {\n    if (!schedule.enabled) {\n      return { status: 'disabled', color: 'default', icon: <PauseIcon /> };\n    }\n\n    const now = new Date();\n    const currentTime = format(now, 'HH:mm');\n    \n    // Check if we're in shutdown period\n    if (schedule.shutdown_time && schedule.startup_time) {\n      const shutdownTime = schedule.shutdown_time;\n      const startupTime = schedule.startup_time;\n      \n      // Handle overnight schedules (shutdown after startup)\n      if (shutdownTime > startupTime) {\n        if (currentTime >= shutdownTime || currentTime < startupTime) {\n          return { status: 'shutdown', color: 'error', icon: <PauseIcon /> };\n        }\n      } else {\n        // Same day schedule\n        if (currentTime >= shutdownTime && currentTime < startupTime) {\n          return { status: 'shutdown', color: 'error', icon: <PauseIcon /> };\n        }\n      }\n    }\n\n    // Check if there are any recent errors\n    if (schedule.metadata.last_error) {\n      const lastError = parseISO(schedule.metadata.last_error);\n      const oneHourAgo = new Date(now.getTime() - 60 * 60 * 1000);\n      if (isAfter(lastError, oneHourAgo)) {\n        return { status: 'error', color: 'error', icon: <ErrorIcon /> };\n      }\n    }\n\n    return { status: 'active', color: 'success', icon: <PlayIcon /> };\n  };\n\n  const getNextAction = (schedule: NamespaceSchedule) => {\n    if (!schedule.enabled) return 'Disabled';\n    \n    const now = new Date();\n    const currentTime = format(now, 'HH:mm');\n    \n    if (schedule.shutdown_time && schedule.startup_time) {\n      const shutdownTime = schedule.shutdown_time;\n      const startupTime = schedule.startup_time;\n      \n      // Handle overnight schedules\n      if (shutdownTime > startupTime) {\n        if (currentTime >= shutdownTime || currentTime < startupTime) {\n          return `Startup at ${startupTime}`;\n        } else {\n          return `Shutdown at ${shutdownTime}`;\n        }\n      } else {\n        // Same day schedule\n        if (currentTime >= shutdownTime && currentTime < startupTime) {\n          return `Startup at ${startupTime}`;\n        } else if (currentTime < shutdownTime) {\n          return `Shutdown at ${shutdownTime}`;\n        } else {\n          return `Shutdown at ${shutdownTime} (tomorrow)`;\n        }\n      }\n    }\n    \n    return 'No schedule';\n  };\n\n  const calculateDailySavings = (schedule: NamespaceSchedule) => {\n    if (!schedule.shutdown_time || !schedule.startup_time) return 0;\n    \n    const target = schedule.metadata.cost_savings_target || 0;\n    return Math.round(target / 30); // Approximate daily savings from monthly target\n  };\n\n  if (schedules.length === 0) {\n    return (\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Namespace Status\n          </Typography>\n          <Alert severity=\"info\">\n            No namespace schedules configured yet. Create your first schedule to get started.\n          </Alert>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardContent>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\n          <Typography variant=\"h6\">\n            Namespace Status\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            {schedules.filter(s => s.enabled).length} of {schedules.length} active\n          </Typography>\n        </Box>\n\n        <Grid container spacing={2}>\n          {schedules.map((schedule) => {\n            const { status, color, icon } = getScheduleStatus(schedule);\n            const isExpanded = expandedCards.has(schedule.id);\n            const dailySavings = calculateDailySavings(schedule);\n\n            return (\n              <Grid item xs={12} sm={6} lg={4} key={schedule.id}>\n                <Card \n                  variant=\"outlined\" \n                  sx={{ \n                    height: '100%',\n                    transition: 'all 0.2s',\n                    '&:hover': {\n                      boxShadow: 2,\n                    }\n                  }}\n                >\n                  <CardContent sx={{ pb: 1 }}>\n                    {/* Header */}\n                    <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={1}>\n                      <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                        <Avatar sx={{ width: 32, height: 32, bgcolor: `${color}.light` }}>\n                          {icon}\n                        </Avatar>\n                        <Box>\n                          <Typography variant=\"subtitle2\" noWrap>\n                            {schedule.namespace}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {schedule.cluster || 'default'}\n                          </Typography>\n                        </Box>\n                      </Box>\n                      \n                      <IconButton \n                        size=\"small\" \n                        onClick={() => toggleExpanded(schedule.id)}\n                      >\n                        {isExpanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                      </IconButton>\n                    </Box>\n\n                    {/* Status */}\n                    <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={2}>\n                      <Chip\n                        label={status.toUpperCase()}\n                        color={color as any}\n                        size=\"small\"\n                        variant=\"outlined\"\n                      />\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {getNextAction(schedule)}\n                      </Typography>\n                    </Box>\n\n                    {/* Schedule Times */}\n                    <Box display=\"flex\" justifyContent=\"space-between\" mb={1}>\n                      <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                        <TimeIcon fontSize=\"small\" color=\"action\" />\n                        <Typography variant=\"caption\">\n                          {schedule.shutdown_time || '--:--'} - {schedule.startup_time || '--:--'}\n                        </Typography>\n                      </Box>\n                      {dailySavings > 0 && (\n                        <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                          <SavingsIcon fontSize=\"small\" color=\"success\" />\n                          <Typography variant=\"caption\" color=\"success.main\">\n                            ${dailySavings}/day\n                          </Typography>\n                        </Box>\n                      )}\n                    </Box>\n\n                    {/* Days of Week */}\n                    <Box display=\"flex\" gap={0.5} mb={2}>\n                      {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map((day, index) => {\n                        const isActive = schedule.days_of_week?.includes(index + 1);\n                        return (\n                          <Chip\n                            key={day}\n                            label={day}\n                            size=\"small\"\n                            variant={isActive ? \"filled\" : \"outlined\"}\n                            color={isActive ? \"primary\" : \"default\"}\n                            sx={{ \n                              minWidth: 'auto',\n                              height: 20,\n                              fontSize: '0.7rem',\n                              '& .MuiChip-label': { px: 0.5 }\n                            }}\n                          />\n                        );\n                      })}\n                    </Box>\n\n                    {/* Expanded Details */}\n                    <Collapse in={isExpanded}>\n                      <Box pt={1} borderTop={1} borderColor=\"divider\">\n                        {/* Last Operation */}\n                        {schedule.metadata.last_operation && (\n                          <Box mb={1}>\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              Last Operation:\n                            </Typography>\n                            <Typography variant=\"body2\">\n                              {schedule.metadata.last_operation} at{' '}\n                              {schedule.metadata.last_operation_time \n                                ? format(parseISO(schedule.metadata.last_operation_time), 'MMM dd, HH:mm')\n                                : 'Unknown'\n                              }\n                            </Typography>\n                          </Box>\n                        )}\n\n                        {/* Error Information */}\n                        {schedule.metadata.last_error && (\n                          <Box mb={1}>\n                            <Typography variant=\"caption\" color=\"error\">\n                              Last Error:\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"error\">\n                              {schedule.metadata.last_error_message || 'Unknown error'}\n                            </Typography>\n                          </Box>\n                        )}\n\n                        {/* Resource Targets */}\n                        {(schedule.resource_targets?.deployments || schedule.resource_targets?.statefulsets) && (\n                          <Box mb={1}>\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              Targets:\n                            </Typography>\n                            <Box display=\"flex\" gap={1} flexWrap=\"wrap\">\n                              {schedule.resource_targets.deployments?.map((dep, idx) => (\n                                <Chip\n                                  key={`dep-${idx}`}\n                                  label={`Deploy: ${dep}`}\n                                  size=\"small\"\n                                  variant=\"outlined\"\n                                />\n                              ))}\n                              {schedule.resource_targets.statefulsets?.map((sts, idx) => (\n                                <Chip\n                                  key={`sts-${idx}`}\n                                  label={`STS: ${sts}`}\n                                  size=\"small\"\n                                  variant=\"outlined\"\n                                />\n                              ))}\n                            </Box>\n                          </Box>\n                        )}\n\n                        {/* Success Rate */}\n                        {schedule.metadata.success_rate !== undefined && (\n                          <Box>\n                            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n                              <Typography variant=\"caption\" color=\"text.secondary\">\n                                Success Rate\n                              </Typography>\n                              <Typography variant=\"caption\">\n                                {schedule.metadata.success_rate}%\n                              </Typography>\n                            </Box>\n                            <LinearProgress\n                              variant=\"determinate\"\n                              value={schedule.metadata.success_rate}\n                              color={schedule.metadata.success_rate > 90 ? 'success' : 'warning'}\n                              sx={{ height: 4, borderRadius: 2 }}\n                            />\n                          </Box>\n                        )}\n                      </Box>\n                    </Collapse>\n                  </CardContent>\n                </Card>\n              </Grid>\n            );\n          })}\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default NamespaceStatusGrid;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}